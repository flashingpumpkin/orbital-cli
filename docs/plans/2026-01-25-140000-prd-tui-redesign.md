# Orbital CLI TUI Redesign - Product Requirements Document

**Status**: Draft
**Created**: 2026-01-25
**Author**: Claude (via TUI design review task)

## Executive Summary

This document outlines a comprehensive redesign of the Orbital CLI terminal user interface. The goal is to transform the functional but generic TUI into a distinctive, production-grade terminal experience that reflects Orbital's purpose as an autonomous Claude Code iteration runner.

## Background

### What Orbital Does

Orbital runs Claude Code in autonomous loops, monitoring for completion markers, managing iteration budgets, and optionally isolating work in git worktrees. Users launch Orbital with spec files and watch as Claude works through implementation tasks.

### Current State

The existing TUI is functional with:
- Tab-based navigation (Output, Spec files, Notes, Context)
- Real-time streaming output display
- Progress metrics (iteration, tokens, cost)
- Session and worktree information panels
- Task list display from TodoWrite

However, the visual presentation is generic. Grey text on black with simple horizontal rules. No branding, no visual identity, no sense of watching a sophisticated autonomous system at work.

### Design Goals

1. **Distinctive Identity**: Create a memorable visual experience
2. **Professional Monitoring**: Feel like watching a dashboard, not reading a log
3. **Clear Hierarchy**: Information should be scannable at a glance
4. **Accessibility**: Maintain readability and keyboard navigation
5. **Performance**: No degradation from current implementation

## Aesthetic Direction: Amber Terminal

The redesigned TUI adopts an **Amber Terminal** aesthetic:

- **Colour Palette**: Amber/orange (#FFB000) on black background
- **Border Style**: Double-line Unicode box drawing (â•”â•â•—â•‘â•šâ•)
- **Typography**: Strategic use of bold, dim variations
- **Vibe**: Vintage CRT monitoring system, professional operations centre

This aesthetic fits Orbital's purpose: watching an autonomous system work through tasks. The amber glow evokes monitoring consoles, mission control displays, and serious operational tooling.

### Colour Specification

| Element | Colour | Code | Usage |
|---------|--------|------|-------|
| Primary | Amber | #FFB000 / 214 | Headers, active states, borders |
| Primary Dim | Dark Amber | #996600 / 136 | Inactive borders, separators |
| Text | Light Amber | #FFD966 / 222 | Body text, values |
| Text Dim | Faded Amber | #B38F00 / 178 | Labels, secondary text |
| Background | Black | #000000 / 0 | Terminal background |
| Success | Green | #00FF00 / 82 | Completed tasks, valid states |
| Warning | Bright Amber | #FFAA00 / 208 | >80% budget/iterations |
| Error | Red | #FF3300 / 196 | Errors, invalid states |

## Layout Specification

### Overall Structure

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  â—† ORBITAL                                      Iteration 3/50  â”‚  $2.34/$100â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘  1:Output â”‚ 2:Spec â”‚ 3:Notes â”‚ 4:Context                                     â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                              â•‘
â•‘  [Output/File content area - scrollable]                                     â•‘
â•‘                                                                              â•‘
â•‘                                                                              â•‘
â•‘                                                                              â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘  â— Implement authentication module                                           â•‘
â•‘  â†’ Writing test file                                                         â•‘
â•‘  â—‹ Run verification suite                                                    â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘  Step: implement (2/4) â”‚ Tokens: 12,456 in / 3,891 out                       â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘  Spec: docs/plans/2026-01-25-feature.md                                      â•‘
â•‘  Notes: docs/notes/2026-01-25-notes.md â”‚ State: .orbital/state.json          â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘  â‡ feature-auth â”‚ Branch: orbital/feature-auth                               â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  â†‘/â†“ scroll  â†/â†’ tab  1-9 jump  r reload  q quit
```

### Panel Specifications

#### Header Panel (1 line inside border)

- **Left**: Orbital logo/brand mark (â—† ORBITAL or similar)
- **Right**: Key metrics at a glance (Iteration X/Y â”‚ $Cost/$Budget)
- **Purpose**: Always-visible status without needing to look at panels

#### Tab Bar (1 line inside border)

- Numbered tabs with keyboard hint (1:Output, 2:Spec, etc.)
- Active tab: Bold amber background
- Inactive tabs: Dim text
- Separator: â”‚ between tabs

#### Content Area (Variable height)

- Primary scrollable region
- **Output Tab**: Streaming Claude output with formatted events
- **File Tabs**: Line-numbered file content

Content formatting:
- Tool calls: `â†’ ToolName path/to/file`
- Thoughts: `ğŸ’­ Claude's reasoning...` (amber/yellow)
- Results: `âœ“ Success summary` (green)
- Errors: `âœ— Error message` (red)

#### Task Panel (0-7 lines, collapsible)

Task status icons:
- `â—` Completed (green)
- `â†’` In progress (amber, animated pulse optional)
- `â—‹` Pending (dim)

Show header "Tasks" with scroll indicator if overflow.

#### Progress Panel (2 lines)

Line 1: Step name with position (implement 2/4), Gate retries if applicable
Line 2: Token counts (formatted with commas), Cost display

**Visual Progress Bars** (new):
```
Iteration [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘] 8/50
Budget    [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘] $7.23/$10.00
```

Consider implementing inline spark-style progress instead of text fractions.

#### Session Panel (2 lines)

- Spec file path(s)
- Notes, State, Context paths with truncation

#### Worktree Panel (1 line, conditional)

- Icon: â‡
- Worktree name and branch
- Purple accent colour to distinguish from other panels

#### Help Bar (1 line, outside main border)

Keyboard shortcuts displayed in dim text below the main frame.

## Component Specifications

### Box Drawing

Use double-line characters for outer frame, single-line for internal divisions:

```
Outer: â•” â• â•— â•‘ â•š â• â•  â•£ â•¬
Inner: â”€ â”‚ â”œ â”¤ â”¬ â”´ â”¼
```

### Progress Visualisation

**Iteration Progress**:
```go
// Characters for progress bar
const (
    barFilled = "â–ˆ"
    barEmpty  = "â–‘"
    barWidth  = 20
)
```

**Cost Progress**:
- Normal: Amber bar
- Warning (>80%): Orange/yellow bar
- Critical (>95%): Red bar

### Status Indicators

| State | Icon | Colour | Animation |
|-------|------|--------|-----------|
| Pending | â—‹ | Dim | None |
| In Progress | â†’ | Amber | Optional blink |
| Complete | â— | Green | None |
| Error | âœ— | Red | None |
| Valid | âœ“ | Green | None |
| Warning | âš  | Orange | None |

### Typography Hierarchy

1. **Headers**: Bold, full amber (#FFB000)
2. **Labels**: Dim amber (#B38F00)
3. **Values**: Light amber (#FFD966)
4. **Body text**: Light amber
5. **Inactive/Secondary**: Dim amber

### Spinner Animation (Optional)

For loading states, consider:
- Braille dots: `â ‹â ™â ¹â ¸â ¼â ´â ¦â §â ‡â `
- Block spinner: `â––â–˜â–â–—`
- Simple: `-\|/`

## Interaction Design

### Keyboard Navigation

| Key | Action |
|-----|--------|
| `1-9` | Jump to tab N |
| `â†/h`, `â†’/l` | Previous/next tab |
| `Tab`, `Shift+Tab` | Cycle tabs |
| `â†‘/k`, `â†“/j` | Scroll up/down |
| `PgUp`, `PgDn` | Page scroll |
| `r` | Reload current file |
| `q`, `Ctrl+C` | Quit |

### Mouse Support

- Wheel: Scroll content
- Click on tab bar: Switch tabs
- Future: Click on tasks to expand details

### Focus States

Active tab clearly distinguished with:
- Background colour
- Bold text
- Different border treatment

## Session Selector Redesign

The `orbital continue` selector should match the main TUI aesthetic:

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  â—† ORBITAL CONTINUE                                                          â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                              â•‘
â•‘  > feature-authentication                                              Valid â•‘
â•‘    Branch: orbital/feature-auth                                              â•‘
â•‘    Specs: docs/plans/auth-spec.md                                            â•‘
â•‘    Created: 2 hours ago                                                      â•‘
â•‘                                                                              â•‘
â•‘    api-refactor                                                      Stale   â•‘
â•‘    Specs: docs/plans/api-spec.md                                             â•‘
â•‘    Created: 3 days ago                                                       â•‘
â•‘    ! Worktree not found                                                      â•‘
â•‘                                                                              â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘  â†‘/â†“ navigate  enter select  q quit                                          â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

## Implementation Plan

### Phase 1: Style System Refactor

1. Create centralised style constants in `styles.go`
2. Define colour palette as named constants
3. Create box-drawing character constants
4. Update `defaultStyles()` to use new palette

### Phase 2: Layout Enhancement

1. Add header panel to layout calculation
2. Add help bar (outside main frame)
3. Implement bordered panel rendering
4. Add progress bar components

### Phase 3: Visual Updates

1. Implement new renderHeader() method
2. Update renderTabBar() with new styling
3. Add progress bar visualisation to renderProgressPanel()
4. Update all panels with bordered appearance
5. Add help bar rendering

### Phase 4: Session Selector

1. Apply same styling to selector/styles.go
2. Update selector rendering with borders
3. Match colour palette

### Phase 5: Polish

1. Add loading spinners where appropriate
2. Improve empty state messages
3. Test with various terminal sizes
4. Verify NO_COLOR support still works

## Technical Considerations

### Performance

- Pre-compute box drawing strings rather than concatenating per-render
- Cache rendered borders for fixed-width panels
- Maintain existing non-blocking message queue approach

### Compatibility

- All characters are standard Unicode box drawing (widespread support)
- ANSI 256-colour mode (not true colour) for broader terminal support
- Graceful degradation: ASCII fallback if Unicode not supported
- NO_COLOR environment variable respected

### Testing

- Update existing tests for new render output
- Add visual regression tests if feasible
- Test with narrow terminals (80 cols)
- Test with very wide terminals (200+ cols)

## Accessibility

1. **Colour Contrast**: Amber on black exceeds 4.5:1 ratio
2. **Not Colour-Only**: Status uses icons + colour
3. **Keyboard Navigation**: Full keyboard support maintained
4. **Focus Visibility**: Clear active tab indication
5. **Screen Readers**: Logical content order preserved

## Success Metrics

1. **Visual Identity**: Orbital TUI should be recognisable
2. **Scanability**: Key metrics visible within 1 second
3. **No Regressions**: All current functionality preserved
4. **Performance**: No perceptible rendering slowdown

## Open Questions

1. Should we add a "compact mode" for smaller terminals?
2. Should the header show elapsed time?
3. Should progress bars be optional/configurable?
4. Should we support custom colour themes in config?

## Appendix: ASCII Art Logo Options

Option A - Simple:
```
â—† ORBITAL
```

Option B - Stylised:
```
â—‹ ORBITAL
```

Option C - Bracketed:
```
[ ORBITAL ]
```

Option D - Geometric:
```
â—‡ ORBITAL
```

Recommendation: Option A (â—† ORBITAL) - Simple, distinctive, renders consistently.

## References

- Current TUI implementation: `/internal/tui/`
- BubbleTea framework: github.com/charmbracelet/bubbletea
- Lipgloss styling: github.com/charmbracelet/lipgloss
- Unicode box drawing: U+2500-U+257F
