# TUI Review Notes

Date: 2026-01-25

## Current State Analysis

Completed thorough review of the existing TUI implementation in `/internal/tui/`.

### Files Reviewed

- `model.go` (1338 lines) - Main bubbletea model with state, rendering, and interaction
- `layout.go` (146 lines) - Dynamic layout calculation
- `bridge.go` (438 lines) - Stream-to-TUI adapter connecting Claude output
- `program.go` - Program wrapper
- `messages.go` - Message type definitions
- `selector/model.go` (447 lines) - Session selector for `orbital continue`
- `selector/styles.go` (78 lines) - Selector styling

### Current Architecture

The TUI uses BubbleTea (Charm) with lipgloss for styling. Key components:

1. **Tab System**: Output tab + file tabs (spec, notes, context)
2. **Fixed Panels**: Progress, Session, Worktree (conditional)
3. **Task Panel**: Variable height (0-7 lines), collapses if space constrained
4. **Scroll Area**: Remaining space for output/file content

### Current Visual Elements

**Color Palette (ANSI 256)**:
- Border: #240 (dark grey)
- Labels: #245 (medium grey)
- Values: #252 (light grey)
- Warning: #214 (orange)
- Success: #82 (green)
- Error: #196 (red)
- Worktree: #141/#183 (purple)

**Typography**:
- Plain text, no ASCII art headers
- Minimal use of Unicode symbols (task icons: ○ → ✓, worktree icon: ⎇)
- Simple separators using `─` character

**Layout**:
- Single column, stacked panels
- Tab bar at top
- Fixed panel heights at bottom
- Responsive to terminal size (min 80x24)

### Identified Issues and Improvement Areas

1. **Visual Identity**: Generic appearance, lacks distinctive character
2. **Header/Branding**: No orbital branding or visual identity
3. **Separators**: Simple `─` dividers, could use more visual interest
4. **Progress Visualisation**: Text-only iteration/budget display, no visual progress bars
5. **Panel Borders**: No borders around panels, just horizontal separators
6. **Status Indicators**: Basic, could be more prominent
7. **File Tab Display**: Line numbers work but could have better highlighting
8. **Empty States**: Basic "Loading..." and "No sessions" messages
9. **Help/Keybindings**: Only shown in selector, not in main TUI
10. **Animation**: No spinners or loading animations

### Positive Aspects to Preserve

1. Responsive layout system works well
2. Tab navigation with keyboard (1-9, arrows) and mouse
3. ANSI-aware line wrapping
4. Lazy file loading with caching
5. Dual scroll modes (tailing vs manual)
6. Non-blocking message queue for stream processing
7. Clean separation of concerns (model/view/bridge/layout)

## Design Direction Decision

For Orbital CLI, an **Amber Terminal** aesthetic fits well:
- Professional, focused monitoring feel
- Vintage CRT aesthetic suits autonomous loop monitoring
- Orange/amber on black provides good visibility
- Double-line borders add structure without being heavy

Alternative considered: Minimalist Zen (Nord palette) - clean but perhaps too subtle for a monitoring tool.

## PRD Creation

Created comprehensive PRD document: `docs/plans/2026-01-25-140000-prd-tui-redesign.md`

The PRD covers:
- Amber Terminal aesthetic direction
- Complete colour palette specification
- Layout wireframes with all panels
- Component specifications (progress bars, status indicators, typography)
- Interaction design (keyboard, mouse)
- Session selector redesign
- Five-phase implementation plan
- Technical considerations (performance, compatibility, accessibility)

## Task Complete

All deliverables created:
1. Notes file documenting analysis
2. PRD document with full TUI redesign specification
